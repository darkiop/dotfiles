#!/usr/bin/env zsh

# Guard: only for zsh.
if [[ -z "${ZSH_VERSION:-}" ]]; then
  return 0
fi

# Zsh completion init (enabled via DOTFILES_ENABLE_BASH_COMPLETION).
case $- in
  *i*) ;;
  *) return ;;
esac

autoload -Uz compinit
if [[ -z "${DOTFILES_ZSH_COMPINIT_DONE:-}" ]]; then
  if compinit -d "${HOME}/.zcompdump" 2>/dev/null; then
    export DOTFILES_ZSH_COMPINIT_DONE=1
  else
    compinit -i -d "${HOME}/.zcompdump" 2>/dev/null || return 0
    export DOTFILES_ZSH_COMPINIT_DONE=1
  fi
fi
